<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Autoloading in Emacs &#183;</title><meta name=description content="Interesting content."><meta name=keywords content="Interesting keywords."><link rel=stylesheet href=https://peromage.github.io/css/skeria.css><link rel=stylesheet href=https://peromage.github.io/css/font.awesome.6.1.2.all.min.css></head><body><div class=topbar><div class=topbar-sticky><a href=https://peromage.github.io/ style=text-decoration:none><h1>undefined behavior</h1></a><span class=lead>tb;dr - too boring; don&rsquo;t read</span>
<span class=topbar-nav><p><span class=topbar-nav-item><a href=https://peromage.github.io/>Recent</a>
</span><span class=topbar-nav-item><a href=https://peromage.github.io/posts>All Posts</a>
</span><span class=topbar-nav-item><a href=https://peromage.github.io/categories>Categories</a>
</span><span class=topbar-nav-item><a href=https://peromage.github.io/tags>Tags</a>
</span><span class=topbar-nav-item><a href=https://peromage.github.io/about>About</a>
</span><span class=topbar-nav-item><a href=https://peromage.github.io/search>Search</a></span></p></span></div></div><div class="content container"><div class=post><h1 class=post-title>Autoloading in Emacs</h1><span class=post-date>Jun 6, 2022
&nbsp;&#183;&nbsp; 2 minute read
&nbsp;&#183;&nbsp;
<a class=label href=https://peromage.github.io/emacs>emacs</a></span><p>Autoloading is a neat feature in Emacs. It speeds up Emacs by lazy load the files. But it could be a little confusing if you&rsquo;re switching from Vim.</p><h2 id=myth-not-working-as-expected>Myth - Not Working as Expected</h2><p>If you have used Vim you know in Vim you can put your library files to the load path variable and Vim autoloads them whenever one of the functions/variables is used. Initially I thought this is the same in Emacs but with a little effort to put the magic autoload comments before the function/variable definition. It turned out I was wrong. When I called my functions Emacs could not find them until I explicitly require them. This is obviously not my intention.</p><h2 id=make-it-work>Make It Work</h2><p>After carefully reading the document, I got that the magic autoload comment is just a <a href=https://www.gnu.org/software/emacs/manual/html_node/elisp/Autoload.html#index-autoloadp>autoload cookie</a> that guides Emacs to generate the real autoload code. In one word, I have to define the function/variable autoload definition anyways. But with the cookies it simplifies the process.</p><ol><li>Add magic comment <code>;;;###autoload</code> before the desired function/variable definition.</li><li><code>M-x</code> <code>update-file-autoloads</code> command on the library file which contains the definitions that need to be autoloaded. Store that generated autoload definition file with a different name.</li><li>Require that autoload definition file in the <code>init.el</code>.</li></ol><p>That&rsquo;s the process to autoload the custom library. The downside is the <code>update-file-autoloads</code> command has to be called every time the library file is updated.</p><p>Alternative way is to use <code>package-install-from-buffer</code> to install the library file as a package. <code>package.el</code> does the dirty work for you, takes care of autoload definition generation and loading automatically.</p><h2 id=reference>Reference</h2><ul><li><a href=https://emacs.stackexchange.com/questions/8023/how-to-use-autoload>https://emacs.stackexchange.com/questions/8023/how-to-use-autoload</a></li></ul></div></div><script src=https://peromage.github.io/js/mathjax.3.2.2.tex-svg.min.js></script><div class=bottombar><div class=bottombar-sticky><div class=icons><span class=icons-item><a href=https://github.com/peromage target=_blank><i class="fab fa-github"></i></a> </span><span class=icons-item><a href=https://www.linkedin.com/in/fangdeng/ target=_blank><i class="fab fa-linkedin fa-1x"></i></a> </span><span class=icons-item><a href=mailto:fang@elfang.com><i class="fas fa-envelope fa-1x"></i></a> </span><span class=icons-item><a href=/me.pub><i class="fas fa-key fa-1x"></i></a></span></div><div class=footer><p>&copy; 2025 , <a href=https://peromage.github.io/license/>License</a><br><a href=/privacy title="Privacy notice">Privacy notice</a></p></div></div></div></body></html>